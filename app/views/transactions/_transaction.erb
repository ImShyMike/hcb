<% is_nested = false if local_assigns[:is_nested].nil? %>

<tr
  class="transaction--<%= transaction.amount.negative? ? 'negative' : 'positive' %> <%= 'muted' if is_nested %>"
  data-behavior="filterbar_row"
  data-filter="<%= transaction.filter_data.to_json %>">
  <td>
    <%= link_to transaction.date, transaction unless is_nested %>
  </td>
  <td>
    <%= link_to transaction do %>
      <% if is_nested %>
        <span class="flip-horizontal"> â†µ</span>
      <% end %>
      <%= transaction.display_name %>
    <% end %>
  </td>
  <td>
    <%= link_to 'See Transaction', transaction, class: 'underline' %>
  </td>
  <td colspan="2">
    <%= link_to render_money(transaction.amount), transaction %>
  </td>
</tr>
