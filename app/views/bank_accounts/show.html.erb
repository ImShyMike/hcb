<h1><%= @account.name %></h1>

<section class="statset mb2">
  <div class="stat stat--wide">
    <span class="stat__label">Account balance</span>
    <span class="stat__value"><%= render_money @account.balance, '' %></span>
  </div>
  <div class="stat stat--numerical stat--small">
    <span class="stat__label">Transactions</span>
    <span class="stat__value"><%= @transactions.size %></span>
  </div>
</section>

<table>
  <tr>
    <th>Date</th>
    <th>Name</th>
    <th>Amount</th>
    <th>Event</th>
    <th>Details</th>
  </tr>
  <% @transactions.each do |t| %>
    <tr class="<%= 'shade-yellow' if !t.event && t.is_event_related %>">
      <td>
        <%= t.date %>
      </td>
      <td>
        <%= t.name %>
      </td>
      <td>
        <%= render_money t.amount %>
      </td>
      <td>
        <% if t.event %>
          <%= link_to t.event.name, t.event %>
        <% elsif t.is_event_related %>
          <%= link_to 'Set Event', edit_transaction_path(t), class: 'btn bg-info' %>
        <% else %>
          n/a
        <% end %>
      </td>
      <td>
        <%= link_to 'View', t %>
      </td>
    </tr>
  <% end %>
</table>
