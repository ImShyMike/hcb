<% title 'Sign in' %>
<% page_xs %>
<% @home_size = 128 %>
<% content_for(:page_class) { 'bg-snow pt4' } %>

<% content_for :head do %>
  <% img = "/brand/hcb-icon-icon-original.png" %>
  <meta name="twitter:card" content="summary">
  <meta property="og:image" content="<%= img %>"/>
  <meta name="twitter:image" content="<%= img %>">
  <meta property="og:site_name" content="Hack Club Bank" />
  <meta property="og:url" content="https://bank.hackclub.com">
  <meta property="og:title" content="Sign in">
  <meta name="twitter:title" content="Sign in">
  <meta property="og:description" content="Sign in to Hack Club Bank.">
  <meta name="twitter:description" content="Sign in to Hack Club Bank.">
  <meta name="description" content="Sign in to Hack Club Bank.">
<% end %>

<article class="center mt3" data-turbo="false" data-controller="webauthn-auth">
  <h1 class="mt2">
    <span class="h3 caps secondary block">Sign in to</span>
    <span class="primary">Hack Club Bank</span>
  </h1>
  <%= form_tag login_code_users_path, 'data-action': 'webauthn-auth#submit', 'data-webauthn-auth-target': 'authForm' do %>
    <div data-webauthn-auth-target="error" class="mb2 display-none">
      <p class="flash error mb1">Security key authentication failed.</p>
      <%= link_to 'Get a login code instead', login_code_users_path, data: { 'action': 'webauthn-auth#loginCode' } %>
    </div>

    <%= label_tag :email, 'Enter your email…', class: 'left-align' %>
    <%= hidden_field_tag :return_to, @return_to if @return_to %>
    <%= email_field_tag :email, @prefill_email, placeholder: 'Email address', autofocus: true, autocomplete: 'username', class: 'left-align mb2', required: true, "data-webauthn-auth-target" => "loginEmailInput" %>
    <div class="flex justify-center">
      <%= submit_tag 'Continue' %>
    </div>
  <% end %>
  <p class="h5 muted mt5">Need help? <%= help_email %></p>
  <p class="h5 mt2"><a href="https://hackclub.com/bank?ref=bank_auth">What’s Bank?</a></p>
</article>
