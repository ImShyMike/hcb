<header class="header <%= "mt3" unless content_for?(:nav) %>">
  <div class="header-left line-height-0 flex items-center justify-end">
    <button
      data-behavior="toggle_theme"
      class="muted pointer no-select tooltipped tooltipped--s"
      aria-label="Toggle dark mode"
      tabindex="0">
      <%= inline_icon "moon", size: home_action_size %>
      <%= inline_icon "moon-fill", size: home_action_size, style: "display: none;" %>
    </button>
    <% if signed_in? %>
      <a
        href="https://changelog.hcb.hackclub.com"
        target="_blank"
        class="ml2 relative muted pointer tooltipped tooltipped--s"
        aria-label="See whatâ€™s new with HCB"
        id="changelog-icon">
        <%= inline_icon "rep", size: home_action_size %>
      </a>
    <% end %>
  </div>

  <div data-controller="menu" data-menu-placement-value="<%= content_for?(:nav) ? "bottom-start" : "bottom-center" %>">
    <%= link_to root_path,
      class: "header-center text-decoration-none flex items-center #{'tooltipped tooltipped--s' if !Rails.env.production? || user_birthday?}",
      'aria-label': user_birthday? ? "Happy birthday! #{['ðŸŽ‚', 'ðŸŽˆ', 'ðŸŽ‰', 'ðŸ¥³'].sample}" : "Youâ€™re in #{Rails.env} mode. #{development_mode_flavor}",
      data: { "controller" => "analytics #{"ar" if current_page?(auth_users_path)}", "analytics-event-name-value" => "Icon right-clicked", "ar-usdz-href-value" => "/bank.usdz", "action" => "contextmenu->menu#toggle contextmenu->analytics#track click@document->menu#close keydown@document->menu#keydown", "menu-target" => "toggle" } do %>
      <%= image_tag user_birthday? ? "logo-party-dark.gif" : by_season("logo-#{Rails.env}-dark.png", fall: "https://cloud-qmskqc293-hack-club-bot.vercel.app/0bank-pumpkin.png"),
          name: "header-logo",
          class: "logo-dark",
          height: @home_size || 36,
          alt: "HCB logo" %>
      <%= image_tag user_birthday? ? "logo-party.gif" : by_season("logo-#{Rails.env}.png", fall: "https://cloud-qmskqc293-hack-club-bot.vercel.app/0bank-pumpkin.png"),
          name: "header-logo",
          class: "logo",
          height: @home_size || 36,
          alt: "HCB logo" %>
    <% end %>

    <div data-menu-target="content" class="menu__content menu__content--2 menu__content--compact">
      <% if fall? %>
        <a href="https://cloud-qmskqc293-hack-club-bot.vercel.app/0bank-pumpkin.png" download class="flex">
          <%= image_tag "https://cloud-qmskqc293-hack-club-bot.vercel.app/0bank-pumpkin.png", class: "mr1", height: 24 %>
          Download spooky icon
        </a>
      <% end %>
      <a href="/brand/hcb-icon-icon-original.png" download class="flex">
        <%= image_tag "logo-production.svg", class: "mr1", size: 24 %>
        Download PNG icon
      </a>
      <a href="/brand/hcb-icon-icon-dark.png" download class="flex">
        <%= image_tag "logo-production-dark.svg", class: "mr1", size: 24 %>
        Download PNG icon
      </a>
      <div class="menu__divider"></div>
      <a href="/branding">Brand guidelines</a>
      <div class="menu__divider"></div>
      <a href="/" target="_blank">Open link in new tab</a>
      <% if current_user&.admin_override_pretend? %>
        <div class="menu__divider"></div>
        <%= button_to "#{"âœ” " if current_user.pretend_is_not_admin}Pretend not to be an admin", user_path(current_user), method: :patch, params: { pretend_is_not_admin: !current_user.pretend_is_not_admin }, class: "menu__action admin-tools" %>
      <% end %>
    </div>
  </div>

  <div class="header-right line-height-0 flex items-center">
    <% if signed_in? %>
      <%= link_to my_inbox_path,
          class: "muted tooltipped tooltipped--s mr2",
          'aria-label': "View transactions awaiting receipts" do %>
            <%= inline_icon "payment-docs", size: home_action_size %>
      <% end %>
      <%= button_to logout_users_path,
          method: :delete,
          class: "muted tooltipped tooltipped--s",
          'aria-label': "Sign out" do %>
            <%= inline_icon "door-leave", size: home_action_size %>
      <% end %>
    <% else %>
      <%= link_to auth_users_path,
          class: "muted tooltipped tooltipped--s",
          'aria-label': "Sign in" do %>
            <%= inline_icon "door-enter", size: home_action_size %>
      <% end %>
    <% end %>
  </div>
</header>
