<header class="header <%= "mt3" unless content_for?(:nav) %>">
  <div class="header-left line-height-0 flex items-center justify-end">
    <action
      role="button"
      data-behavior="toggle_theme"
      class="muted pointer no-select tooltipped tooltipped--s"
      aria-label="Toggle dark mode"
      tabindex="0">
      <%= inline_icon 'moon', size: home_action_size %>
      <%= inline_icon 'moon-fill', size: home_action_size, style: 'display: none;' %>
    </action>
    <% if signed_in? %>
      <div class="ml2 relative" id="changelog-icon">
        <%= link_to 'https://changelog.bank.hackclub.com',
          class: 'muted tooltipped tooltipped--s',
          'aria-label': 'See whatâ€™s new in Bank' do %>
          <%= inline_icon 'rep', size: home_action_size %>
        <% end %>
      </div>
    <% end %>
  </div>

  <%= link_to root_path,
    class: "header-center text-decoration-none flex items-center #{'tooltipped tooltipped--s' if !Rails.env.production? || user_birthday?}",
    'aria-label': user_birthday? ? "Happy birthday! #{['ðŸŽ‚', 'ðŸŽˆ', 'ðŸŽ‰', 'ðŸ¥³'].sample}" : "Youâ€™re in #{Rails.env} mode. #{development_mode_flavor}" do %>
    <%= image_tag user_birthday? ? "logo-party-dark.gif" : "logo-#{Rails.env}-dark.svg",
        name: 'header-logo',
        class: 'logo-dark',
        width: @home_size || 36,
        height: @home_size || 36,
        alt: 'Bank logo' %>
    <%= image_tag user_birthday? ? "logo-party.gif" : "logo-#{Rails.env}.svg",
        name: 'header-logo',
        class: 'logo',
        width: @home_size || 36,
        height: @home_size || 36,
        alt: 'Bank logo' %>
  <% end %>

  <div class="header-right line-height-0 flex items-center">
    <% if signed_in? %>
      <%= link_to my_inbox_path,
        class: 'muted tooltipped tooltipped--s mr2',
        'aria-label': 'View transactions awaiting receipts' do %>
        <%= inline_icon 'payment-docs', size: home_action_size %>
      <% end %>
      <%= link_to logout_users_path, method: :delete,
          class: 'muted tooltipped tooltipped--s',
          'aria-label': 'Sign out of this session. Visit settings to see all sessions' do %>
          <%= inline_icon 'door-leave', size: home_action_size %>
      <% end %>
    <% else %>
      <%= link_to auth_users_path,
          class: 'muted tooltipped tooltipped--s',
          'aria-label': 'Sign in' do %>
          <%= inline_icon 'door-enter', size: home_action_size %>
      <% end %>
    <% end %>
  </div>
</header>
