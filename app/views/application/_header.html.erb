<header class="header <%= "mt3" unless content_for?(:nav) %>">
  <div class="header-left line-height-0 flex items-center justify-end">
    <button
      data-behavior="toggle_theme"
      class="muted pointer no-select tooltipped tooltipped--s"
      aria-label="Toggle dark mode"
      tabindex="0">
      <%= inline_icon "moon", size: home_action_size %>
      <%= inline_icon "moon-fill", size: home_action_size, style: "display: none;" %>
    </button>
    <% if signed_in? %>
      <a
        href="https://changelog.hcb.hackclub.com"
        target="_blank"
        class="ml2 relative muted pointer tooltipped tooltipped--s"
        aria-label="See whatâ€™s new with HCB"
        id="changelog-icon">
        <%= inline_icon "rep", size: home_action_size %>
      </a>
    <% end %>
  </div>

  <div data-controller="menu" data-menu-placement-value="<%= content_for?(:nav) ? "bottom-start" : "bottom-center" %>">
    <%= link_to root_path,
      class: "header-center text-decoration-none flex items-center #{'tooltipped tooltipped--s' if !Rails.env.production? || user_birthday?}",
      'aria-label': user_birthday? ? "Happy birthday! #{['ðŸŽ‚', 'ðŸŽˆ', 'ðŸŽ‰', 'ðŸ¥³'].sample}" : "Youâ€™re in #{Rails.env} mode. #{development_mode_flavor}",
      data: { "controller" => "analytics #{"ar" if current_page?(auth_users_path)}", "analytics-event-name-value" => "Icon right-clicked", "ar-usdz-href-value" => "/bank.usdz", "action" => "contextmenu->menu#toggle contextmenu->analytics#track click@document->menu#close keydown@document->menu#keydown", "menu-target" => "toggle" } do %>
      <%= image_tag user_birthday? ? "logo-party-dark.gif" : by_season("logo-#{Rails.env}-dark.png", fall: "https://cloud-qmskqc293-hack-club-bot.vercel.app/0bank-pumpkin.png"),
          name: "header-logo",
          class: "logo-dark",
          height: @home_size || 36,
          alt: "HCB logo" %>
      <%= image_tag user_birthday? ? "logo-party.gif" : by_season("logo-#{Rails.env}.png", fall: "https://cloud-qmskqc293-hack-club-bot.vercel.app/0bank-pumpkin.png"),
          name: "header-logo",
          class: "logo",
          height: @home_size || 36,
          alt: "HCB logo" %>
    <% end %>

    <div data-menu-target="content" class="menu__content menu__content--2 menu__content--compact">
      <% if fall? %>
        <a href="https://cloud-qmskqc293-hack-club-bot.vercel.app/0bank-pumpkin.png" download class="flex">
          <%= image_tag "https://cloud-qmskqc293-hack-club-bot.vercel.app/0bank-pumpkin.png", class: "mr1", height: 24 %>
          Download spooky icon
        </a>
      <% end %>
      <a href="/brand/hcb-icon-icon-original.png" download class="flex">
        <%= image_tag "logo-production.svg", class: "mr1", size: 24 %>
        Download PNG icon
      </a>
      <a href="/brand/hcb-icon-icon-dark.png" download class="flex">
        <%= image_tag "logo-production-dark.svg", class: "mr1", size: 24 %>
        Download PNG icon
      </a>
      <div class="menu__divider"></div>
      <a href="/branding">Brand guidelines</a>
      <div class="menu__divider"></div>
      <a href="/" target="_blank">Open link in new tab</a>
      <% if current_user&.admin_override_pretend? %>
        <div class="menu__divider"></div>
        <%= button_to "#{"âœ” " if current_user.pretend_is_not_admin}Pretend not to be an admin", user_path(current_user), method: :patch, params: { pretend_is_not_admin: !current_user.pretend_is_not_admin }, class: "menu__action admin-tools" %>
      <% end %>
    </div>
  </div>

  <div class="header-right line-height-0 flex items-center">
    <% if signed_in? %>
      <%= link_to my_inbox_path,
          class: "muted tooltipped tooltipped--s mr2",
          'aria-label': "View transactions awaiting receipts" do %>
            <%= inline_icon "payment-docs", size: home_action_size %>
      <% end %>
      <%= button_to logout_users_path,
          method: :delete,
          class: "muted tooltipped tooltipped--s",
          'aria-label': "Sign out" do %>
            <%= inline_icon "door-leave", size: home_action_size %>
      <% end %>
    <% else %>
      <%= link_to auth_users_path,
          class: "muted tooltipped tooltipped--s",
          'aria-label': "Sign in" do %>
            <%= inline_icon "door-enter", size: home_action_size %>
      <% end %>
    <% end %>
  </div>

  <% if admin_signed_in? %>
    <% @admin_urls = current_user&.admin? ? {
         "Applications"              => "https://airtable.com/tblctmRFEeluG4do7/viwGhv19cV1ZRj61a",
         "OnBoard ID"                => "https://airtable.com/app4Bs8Tjwvk5qcD4/tblVZwB8QMUSDAd41/viwJ15CT6VHCZ0UZ4",
         "Wires"                     => "https://airtable.com/tbloFbH16HI7t3mfG/viwzgt8VLHOC82m8n",
         "PayPal"                    => "https://airtable.com/tbloGiW2jhja8ivtV/viwzhAnWYhpFNhvmC",
         "Disputes"                  => "https://airtable.com/appEzv7w2IBMoxxHe/tblTqbwz5AUkzOcVb",
         "Feedback"                  => "https://airtable.com/tblOmqLjWtJZWXn4O/viwuk2j4xsKJo5EqA",
         "Hackathon Grants"          => "https://airtable.com/tblnNB5iMbidfB552/viwjF8iDPU3gAiXJU",
         "Stickers"                  => "https://airtable.com/tblyhkntth4OyQxiO/viwHcxhOKMZnPXUUU",
         "Wallets"                   => "https://airtable.com/tblJtjtY9qAOG3FS8/viwUz9aheNAvXwzjg",
         "Hackathons"                => "https://dash.hackathons.hackclub.com/sign_in",
         "Sendy"                     => "https://airtable.com/tbl1MRaNpF4KphbOd/viwb7ELYyxpuAz6gQ",
         "1Password"                 => "https://airtable.com/tblcHEZyos3V9DoeI/viwSapKZ8C4ByBuqT",
         "Domains"                   => "https://airtable.com/tbl22cXd3Bo9uo0wp/viwcnZyoctJTFGVY2",
         "PVSA"                      => "https://airtable.com/tbl4ffIbyaEa2fIYW/viw2OPTziXEqOpaLA",
         "The Event Helper"          => "https://airtable.com/tblWlQxkf6L7mEjC4/viwzbku7oWsw5GFEa",
         "Google Workspace Waitlist" => "https://airtable.com/appEzv7w2IBMoxxHe/tbl9CkfZHKZYrXf1T/viwgfJvrrD9Jn9VLj"
       } : {} %>
    <%= react_component "command_bar/CommandBar", { admin: current_user&.admin?, adminUrls: @admin_urls }, { camelize_props: false } %>
  <% end %>

</header>
