<%= form_with(model: @report, class: "mt1 mb1", style: "max-width: 600px;", local: true) do |form| %>
  <%= form.label :report_name, "Report Name", class: "bold" %>
  <%= form.text_field :report_name, placeholder: "Chicago Trip Expenses", required: true %>
  <%= form.label :maximum_amount, "Maximum Reimbursable Value (Optional)", class: "mt2 bold" %>
  <div class="field">
    <div class="flex items-center">
      <span class="bold muted" style="width: 1rem;">$</span>
      <%= form.number_field :maximum_amount, placeholder: "500.00", step: 0.01, min: 0.01, required: false, disabled: !(@current_user.admin? || @current_user != @report.user) && !@report.draft?, data: { controller: "truncate-decimal", action: "truncate-decimal#truncate" } %>
    </div>
  </div>
  <div class="field event-select-target">
    <%= form.label :event_id, "Event", class: "mt2 bold" %>
    <%= form.select(:event_id,
        current_user.admin? ?
          Event.not_demo_mode.reorder(Event::CUSTOM_SORT).map { |event| [event.name, event.id] } :
          current_user.events.not_hidden.filter_demo_mode(false).map { |event| [event.name, event.id] },
        { prompt: "Select an eventâ€¦", required: true }) %>
    <% unless admin_signed_in? %>
      <span class="muted">You can transfer a report to any organization you're a part of.</span>
    <% end %>
  </div>
  <%= form.submit "Update Report", class: "mt2" %>
<% end %>

<% admin_tool_if !@report.initial_draft? do %>
  <%= button_to "Delete Report", reimbursement_report_path(@report), class: "ml0 bg-error btn", method: :delete, type: "button" %>
<% end %>
