<section data-behavior="modal" role="dialog" id="create" class="modal modal--scroll bg-snow">
  <%= form_with(model: Reimbursement::Report, class: "mb3", style: "max-width: 600px;", method: :post) do |form| %>
    <%= modal_header "Open a Report" %>
    <%= form.label :report_name, "Report Name", class: "bold" %>
    <%= form.text_field :report_name, placeholder: "Chicago Trip Expenses", required: true %>
    <%= form.label :maximum_amount, "Maximum Reimbursable Value (Optional)", class: "mt2 bold" %>
    <div class="field">
      <div class="flex items-center">
        <span class="bold muted" style="width: 1rem;">$</span>
        <%= form.number_field :maximum_amount, placeholder: "500.00", step: 0.01, min: 0.01, required: false, data: { controller: "truncate-decimal", action: "truncate-decimal#truncate" } %>
      </div>
    </div>
    <% if defined? @event %>
      <%= form.label :user_id, "Associated User", class: "mt1 bold" %>
      <%= form.select :user_email, @event.users.map { |u| [u.name, u.email] } + [["Non-Organizer", "other"]], id: "reimbursement_report_user", selected: @current_user.email %>
      <%= form.text_field :other_email, class: "hidden mt1", placeholder: "Enter this individual's email", data: { "behavior": "reimbursement_report_email_input" }, required: false %>
      <%= form.hidden_field :event_id, value: @event.id %>
    <% else %>
      <%= form.hidden_field :user_id, value: current_user.id %>
      <%= form.hidden_field :user_email, value: current_user.email %>

      <%= form.label :event_id, "Organization", class: "mt1 bold" %>
      <%= form.select :event_id, current_user.events.not_demo_mode.pluck(:name, :id) %>
    <% end %>
    <%= form.submit "Submit", class: "mt2" %>
  <% end %>
</section>