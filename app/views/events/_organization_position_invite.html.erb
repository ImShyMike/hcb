<div class="organizer-position-invite card flex flex-column overflow-visible mb2">
  <div class="flex justify-between">
    <div class="relative">
      <%= inline_icon("admin-badge", size: 48, class: "avatar-container__admin-bolt") if position.user.admin? %>
      <%= avatar_for position.user, 64 %>
    </div>

    <% if organizer_signed_in? %>
      <div class="flex g1 h-fit-content">
        <% if admin_signed_in? %>
          <div class="tooltipped tooltipped--s" aria-label="Edit user's settings">
            <%= pop_icon_to "controls", edit_user_path(position.user.slug), data: { turbo_frame: "_top" }, class: "admin-tools circle overflow-hidden" %>
          </div>
          <div class="tooltipped tooltipped--s" aria-label="Impersonate user">
            <%= pop_icon_to "spy", impersonate_user_path(id: position.user.id, return_to: request.url), data: { turbo_frame: "_top" }, class: "admin-tools circle overflow-hidden" %>
          </div>
        <% end %>

        <% if position.organizer_position_deletion_requests.under_review.exists? %>
          <div class="tooltipped tooltipped--w" aria-label="Pending removal request">
            <%= pop_icon_to "clock", "#", class: "muted", disabled: true %>
          </div>
        <% else %>
          <%= pop_icon_to "member-remove", new_organizer_remove_path(organizer_id: position.id), class: "error tooltipped tooltipped--s", 'aria-label': "Remove user from organization", data: { turbo_frame: "_top" } %>
        <% end %>
      </div>
    <% end %>
  </div>

  <div class="inline-flex items-center g2">
    <p class="h2 bold m0"><%= position.user.name %></p>

    <% if organizer_signed_in? %>
      <div class="inline-flex g1 align-items-center">
        <%= copy_to_clipboard(position.user.email, class: "line-height-0") do %>
          <%= inline_icon("email", size: 24, class: "muted") %>
        <% end %>

        <% if admin_signed_in? %>
          <%= copy_to_clipboard(position.user.phone_number, class: "line-height-0") do %>
            <%= inline_icon("message-simple", size: 24, class: "warning") %>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>

  <div class="muted flex justify-between align-bottom relative w-100 h6 mt1">
    <p class="m0">Invited <%= relative_timestamp(position.organizer_position_invite.created_at) %> by <%= position.organizer_position_invite.sender.name %></p>
    <% user_mention position.organizer_position_invite.sender %>
    <% if admin_signed_in? %>
      <div class="absolute right-0 bottom-0 line-height-0 tooltipped tooltipped--w" aria-label="<%= (position.signee? ? "Contract signee" : "No contract signature") + ". Click to toggle." %>">
        <%= link_to toggle_signee_status_organizer_path(position.id), data: { turbo_method: "post", turbo_frame: "_top", turbo_confirm: "Are you sure you want to toggle #{position.user.name}'s contract signee status?" } do %>
          <div class="warning">
            <% if position.signee? %>
              <%= inline_icon("docs-positive", size: 24) %>
            <% else %>
              <%= inline_icon("docs-negative", size: 24) %>
            <% end %>
          </div>
      <% end %>
      </div>
    <% end %>
  </div>
</div>
