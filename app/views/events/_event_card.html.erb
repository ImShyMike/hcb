<%= link_to event, style: "max-width: calc(100vw - 2rem)", class: "draggable no-underline" do %>
  <li class="card card--hover flex flex-col justify-between h-full mx-auto relative">
    <div class="z-20">
      <div id="event-<%= event.id %>-title" class="flex mb-4">
        <% if event.logo.attached? %>
          <div class="flex gap-2 items-center">
            <%= image_tag event.logo, height: 24, width: 24, class: "rounded align-bottom" %>
            <strong class="text-xl leading-tight"><%= event.name %></strong>
          </div>
        <% else %>
          <strong class="text-xl leading-tight"><%= event.name %></strong>
        <% end %>
      </div>

      <% if event.demo_mode? %>
            <div class="badge bg-info ml0 mb2 w-fit">Playground Mode</div>
          <% end %>
          <div class="h4 line-height-2 mb2 flex justify-between item-center">
            <span class="flex items-center gap-1 whitespace-nowrap">
              <%= inline_icon "payment", size: 16, class: "muted align-middle", 'aria-label': "Dollar sign", style: "transform: scale(2)" %>
              <%= turbo_frame_tag "event_balance_#{event.public_id}", src: event_async_balance_path(event), data: { turbo_permanent: true }, loading: :lazy do %>
                â€”
              <% end %>
            </span>
            <span class="flex items-center gap-1">
              <%= inline_icon "card", size: 20, class: "muted align-middle", 'aria-label': "Cards", style: "transform: scale(1.2)" %>
              <%= event.stripe_cards.active.count %>
            </span>
          </div>
          <div class="avatar-row">
            <% event.organizer_positions.first(event.organizer_positions.size > 9 ? 8 : 9).each do |position| %>
              <%= avatar_for position.user, 24 %>
            <% end %>
            <% if event.organizer_positions.size > 9 %>
              <div class="rounded-full text-white bg-gray-500 justify-center items-center flex" style="width:24px;height:24px;font-weight: 300;font-size:10px">
                +<%= event.organizer_positions.size - 8 %>
              </div>
            <% end %>
          </div>
    </div>

    <% if event.background_image.attached? %>
      <div class="absolute inset-0 card--blur-overlay z-10" style="backdrop-filter: blur(0.5rem); mask-image: linear-gradient(to top, transparent 0%, black 75%, black 100%);"></div>
      <div class="absolute inset-0 card--background-image" style="background-image: url(<%= url_for(event.background_image).dump %>);">
    <% end %>

  </li>
<% end %>
