<% active = params[:sort] == sort || (params[:sort].nil? && defined?(default) && default) %>

<%= link_to(
      upsert_query_params(
        sort: sort,
        direction: params[:sort] == sort ?
          (params[:direction] == "asc" ? "desc" : "asc") :
          params[:direction] || "asc"
      ),
  class: "sort-button #{active ? 'sort-button--active' : ''} #{'sort-button--right' if defined?(right) && right}"
    ) do %>
  <%= defined?(display) && display ? display : sort.humanize %>
  <%= inline_icon(
        params[:direction] == "desc" ? "down-caret" : "up-caret",
    size: 16
      ) %>
<% end %>
