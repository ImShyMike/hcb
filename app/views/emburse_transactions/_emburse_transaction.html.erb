<% et = emburse_transaction %>
<tr
  class="transaction--<%= et.amount.positive? ? 'positive' : 'negative'  %><%= ' muted' if !et.completed? %>"
  data-behavior="filterbar_row"
  data-filter="<%= et.filter_data.to_json %>">
  <% if et.card %>
    <td
      class="transaction__icon tooltipped tooltipped--e"
      aria-label="Card transaction by <%= et.card.user.initial_name %>">
      <%= link_to et.card do %>
        <%= avatar_for et.card.user, 24 %>
      <% end %>
    </td>
  <% else %>
    <td class="transaction__icon tooltipped tooltipped--e" aria-label="Emburse card transaction">
      <%= inline_icon et.amount > 0 || et.merchant_name.nil? ? 'payment-transfer' : 'card' %>
    </td>
  <% end %>
  <td>
    <%= et.transaction_time.nil? ? 'â€“' : et.transaction_time.to_date %>
  </td>
  <td class="flex justify-between">
    <% if et.completed? %>
      <%= et.merchant_name %>
    <% else %>
      <i><%= et.merchant_name %></i>
    <% end %>
  </td>
  <td>
    <%= list_badge_for et.comments.size, 'note', 'post', optional: true %>
    <% unless et.is_transfer? %>
      <%= list_badge_for et.receipts.size, 'receipt', 'payment-docs', required: true  %>
    <% end %>
  </td>
  <td class="nowrap">
    <%= render_money et.amount %>
  </td>
  <% if organizer_signed_in? || !@event %>
    <td>
      <%= link_to 'Details', et %>
    </td>
  <% end %>
</tr>
  
