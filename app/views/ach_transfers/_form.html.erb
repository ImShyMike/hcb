<%= form_with(model: @ach_transfer, local: true, url: event_ach_transfers_path(@event)) do |form| %>
  <%= form_errors(@ach_transfer, "ACH transfer", "We couldn't send this") %>

  <div class="field">
    <%= form.label :recipient_name %>
    <%= form.text_field :recipient_name, placeholder: "Max Kern", required: true, disabled: @event.demo_mode? %>
    <span class="muted">This is only for your referenceâ€” it doesn't need to match the name on the recipient's bank account.</span>
  </div>

  <div class="field">
    <%= form.label :recipient_tel %>
    <%= form.text_field :recipient_tel, placeholder: "1234567890", required: true, disabled: @event.demo_mode? %>
  </div>

  <div class="field">
    <%= form.label :payment_for, "What are you paying for with this deposit?" %>
    <%= form.text_field :payment_for, placeholder: "Shipment of potions", required: true, disabled: @event.demo_mode? %>
    <span class="muted">This is to help HCB keep record of our transactions. HCB team will see this.</span>
  </div>

  <div class="field">
    <%= form.label :bank_name %>
    <%= form.text_field :bank_name, placeholder: "Name of the bank", required: true, disabled: @event.demo_mode? %>
  </div>

  <div
    class="field"
    <% if Flipper.enabled?(:routing_number_validation, current_user) %>
      data-controller="external-validation"
      data-external-validation-url-value="<%= validate_routing_number_ach_transfers_path %>"
    <% end %>>

    <%= form.label :routing_number %>
    <%= form.text_field :routing_number, placeholder: "123456789", required: true, disabled: @event.demo_mode?, class: "fs-mask", data: { action: "input->external-validation#validate" } %>
    <span class="muted" data-external-validation-target="hint"></span>
  </div>

  <div class="field">
    <%= form.label :account_number %>
    <%= form.text_field :account_number, placeholder: "0913338883", required: true, disabled: @event.demo_mode?, class: "fs-mask" %>
  </div>

  <%= form.label :amount_money, "Amount" %>
  <div class="field">
    <div class="flex items-center">
      <span class="bold muted" style="width: 1rem;">$</span>
      <%= form.number_field :amount_money, placeholder: "500.00", step: 0.01, min: 0.01, required: true, disabled: @event.demo_mode? %>
    </div>
  </div>

  <% admin_tools do %>
    <div class="field">
      <%= form.label :scheduled_on, "Schedule for" %>
      <%= form.date_select :scheduled_on, prompt: true, order: [:month, :day, :year], start_year: Date.today.year %>
      <p class="h5 muted mt0 mb1">Leave blank to send instantly</p>
    </div>
  <% end %>

  <div class="actions tooltipped tooltipped--n inline-block" aria-label="ACH transfers can't be cancelled">
    <%= form.submit "Transfer money now", class: "btn bg-warning", disabled: (!organizer_signed_in? || @event.demo_mode?) %>
  </div>
<% end %>
