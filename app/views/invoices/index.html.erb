<% title "Invoices for #{@event.name}" %>
<% page_snow %>
<% page_md %>
<%= render 'events/nav' %>

<h1 class="heading">
  <span class="flex items-center">
    Invoices
    <%= badge_for @invoices.count, class: 'bg-muted' %>
  </span>
  <%= link_to 'Send an invoice',
    new_event_invoice_path(event_id: @event.slug),
    class: 'btn bg-success' %>
</h1>

<% if @invoices.any? %>
  <ul class="grid">
    <% @invoices.order('due_date DESC').each do |i| %>
      <%= link_to i do %>
        <li class="card">
          <div class="flex flex-wrap items-center">
            <strong class="flex flex-auto items-center mb1">
              <span class="h3"><%= i.sponsor.name %></span>
              <span class="badge bg-<%= i.paid ? 'success' : 'error' %>">
                <%= i.paid ? 'Paid' : 'Unpaid' %>
              </span>
            </strong>
            <span class="block h1 black line-height-1 <%= i.status %>"><%= render_money_short i.item_amount %></span>
          </div>
          <div class="flex flex-wrap justify-between items-center">
            <%= user_mention i.creator %>
            <span class="muted"><%= time_ago_in_words i.created_at %> ago</span>
          </div>
        </li>
      <% end %>
    <% end %>
  </ul>
<% else %>
  <%= blankslate 'Collect sponsor donations with Invoices' %>
<% end %>
