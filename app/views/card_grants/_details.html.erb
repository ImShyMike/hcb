<%# locals: (card_grant:) %>

<div class="card mt2">
      <h3 class="mt-1">Grant details</h3>
  <hr class="my-0 mx-[-16px]">

<section class="details details--wide pt2 pb2 details--tall">
    <p>
      <strong>Expires on</strong>
      <span><%= format_date card_grant.expires_on %></span>
    </p>

    <p>
      <strong>One time use?</strong>
      <span><%= card_grant.one_time_use ? "Yes" : "No" %></span>
    </p>
    <p>
      <strong>Allowed merchants</strong>
      <% if card_grant.allowed_merchants.any? %>
        <span class="font-mono h5"><%= card_grant.allowed_merchant_names.join(", ") %><br>
          (IDs: <%= card_grant.allowed_merchants.join(", ") %>)</span>
    <% else %>
        <span>All merchants allowed</span>
      <% end %>
    </p>

    <p>
      <strong>Allowed categories</strong>
      <% if (allowed_categories = card_grant.allowed_category_names.join(", ").presence) %>
        <span class="font-mono h5"><%= allowed_categories %></span>
      <% else %>
        <span>All categories allowed</span>
      <% end %>
    </p>
    <% if card_grant.keyword_lock.present? %>
      <p>
        <strong>Merchant keyword lock</strong>
        <span class="font-mono h5"><%= card_grant.keyword_lock %></span>
      </p>
    <% end %>
  </section>
  <% if card_grant.pending_invite? || @frame %>
    <section>
      <%= render partial: "actions", locals: { card_grant: @card_grant } %>
    </section>
  <% end %>
</div>
