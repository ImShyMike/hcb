<h2 class="mt0 mb0">Your accounts</h2>

<% if @g_suite.accounts.any? %>
  <ul class="list list--unlinked mt0 mb2">
    <% @g_suite.accounts.order(:address).each do |account| %>
      <li>
        <p>
          <strong><%= account.username %></strong><span><%= account.at_domain %></span>
          â€“ <strong><%= account.status %></strong>
        </p>
        <p class="slate">
          <% if account.initial_password.present? %>
            <%= status_badge :success %>
            <span>Active.</span>
          <% else %>
            <%= status_badge :pending %>
            <span>Account not yet set up.</span>
          <% end %>
          <% if admin_signed_in? || account.backup_email == current_user.email %>
            <span>Backup email: <%= content_tag :code, account.backup_email %></span>
          <% end %>
        </p>
      </li>
      <% end %>
  </ul>
  <% if one_has_password? @g_suite.accounts %>
    <p>Sign in to your active account with the one-time password emailed to your backup address.</p>
  <% end %>
<% end %>

<%= render 'g_suite_accounts/new', g_suite_account: GSuiteAccount.new(g_suite: @g_suite) %>
