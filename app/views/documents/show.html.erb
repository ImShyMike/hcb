<% title @document.name %>
<% page_sm %>

<%= render "events/nav" if !@event.nil? %>

<h1 class="heading pb2">
  <%= @document.name %>
  <% if (@document.user == current_user) || current_user.admin? %>
    <div class="flex items-center mt2" style="gap: 6px">
      <%= link_to document_download_path(@document), target: :_blank, class: "btn" do %>
        <%= inline_icon "download" %>
        Download
      <% end %>
      <%= link_to "Edit", edit_document_path(@document), class: "btn bg-info" %>
      <%= link_to "Destroy", @document, method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn--destroy" %>
    </div>
  <% end %>
</h1>

<div class="card flex items-center justify-center mb2 mt2" style="width: fit-content">
  <%= render "documents/preview", document: @document %>
</div>

<section class="details mb3 pt2">

<p>
  <strong>Added by</strong> <%= user_mention @document.user %>
</p>

</section>

<% admin_tool do %>
<% if @document.downloads.any? %>
<h2 class="my0">Download history</h2>
<ul class="list list--unlinked">
  <% @document.downloads.each do |download| %>
    <li>
      <%= user_mention download.user %>
      <%= content_tag :span, download.created_at %>
    </li>
  <% end %>
</ul>
<% end %>
<% end %>
