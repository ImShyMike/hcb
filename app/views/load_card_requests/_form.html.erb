<%= form_with(model: load_card_request, local: true) do |form| %>
  <% if load_card_request.errors.any? %>
    <div id="error_explanation">
      <h2>Something went wrong üôÅ</h2>
      <ul>
      <% load_card_request.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= form.hidden_field :creator_id, value: current_user.id %>

  <%= form.hidden_field :event_id, value: load_card_request.event.id %>

  <div class="field">
    <%= form.label :load_amount, 'Amount to transfer' %>
    <div class="flex items-center">
      <span class="bold muted" style="width: 1rem;">$</span>
      <%= form.number_field :load_amount, value: load_card_request.load_amount || (@event.balance_available / 100), max: (@event.balance_available / 100), step: 0.01, placeholder: '100.00' %>
    </div>
  </div>

  <% admin_tools do %>
    <div class="field">
      <%= form.label :emburse_transaction_id, 'Emburse transaction ID', class: load_card_request.emburse_transaction_id.blank? %>
      <%= form.text_field :emburse_transaction_id %>
    </div>
  <% end %>

  <div class="actions">
    <% if load_card_request.persisted? %>
      <%= form.submit 'Update' %>
    <% else %>
      <%= form.submit 'Request transfer', data: { confirmation: 'Your money will finish transferring in 2-3 days. After that you can spend it from your card.' } %>
    <% end %>
  </div>
<% end %>
