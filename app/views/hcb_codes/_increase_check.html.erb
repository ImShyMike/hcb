<link href="https://fonts.googleapis.com/css?family=Damion" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Space+Mono" rel="stylesheet">

<% if @hcb_code.increase_check.increase_id.present? %>
  <% admin_tools("mt3") do %>
    <%= link_to "View on Increase", "https://dashboard.increase.com/transfers/#{@hcb_code.increase_check.increase_id}", class: "btn bg-accent", target: "_blank" %>
  <% end %>
<% end %>

<div class="check xs-hide w-100 mt3 mb3" data-behavior="hover_tilt">
  <div class="check__number"><%= @hcb_code.increase_check.check_number || "----" %></div>

  <div class="flex w-100 justify-end mb1">
    <div class="check__field check__field--date" data-label="Date"><%= (@hcb_code.increase_check.approved_at || @hcb_code.increase_check.created_at).strftime("%b %d, %Y") %></div>
  </div>

  <div class="check__row">
    <div class="check__field check__field--orderof" data-label="Pay to the order of"><%= @hcb_code.increase_check.recipient_name %></div>
    <div class="check__field check__field--num" data-label="$">
      <%= render_money_amount @hcb_code.increase_check.amount %>
    </div>
  </div>

  <div class="check__field check__field--dollars" data-label="Dollars" data-check-amount="<%= render_money_amount @hcb_code.increase_check.amount %>" data-behavior="fill_check_words"></div>

  <div class="check__row items-start">
    <div class="check__field check__field--memo" data-label="Memo"><%= @hcb_code.increase_check.memo %></div>
    <div class="check__sig"></div>

  </div>

  <p class="check__meta">
      &#9286;
      <%= @hcb_code.increase_check.event.increase_account_number&.routing_number %>
      &#9286;
      <%= @hcb_code.increase_check.event.increase_account_number&.account_number&.slice(0..2) %>[HIDDEN]
      &#9286;
  </p>
</div>

<article class="card pb0 mt3 mb3">
  <h2 class="h2 mt0 border-none">
    <div class="flex items-start">
      <span class="flex-auto mr1">
        <span class="regular muted"><%= @hcb_code.increase_check.sent? ? "Sent" : "Sending" %></span>
        <%= @hcb_code.increase_check.recipient_name %>
        <span class="regular muted"> a&nbsp;check for </span>
        <span class="regular"><%= render_money @hcb_code.increase_check.amount %></span>
      </span>
      <span class="badge h4 ml2 nowrap bg-<%= @hcb_code.increase_check.state %>">
        <%= @hcb_code.increase_check.state_text %>
      </span>
    </div>
  </h2>
  <section class="card__banner card__darker details-horiz border-top border-bottom">
    <p>
      <% if @hcb_code.increase_check.sent? %>
        <strong>Sent by</strong>
      <% else %>
        <strong>Requested by</strong>
      <% end %>
      <%= user_mention @hcb_code.increase_check.user %>
    </p>
    <% if @hcb_code.increase_check.sent? %>
      <p>
        <strong>Sent at</strong>
        <%= format_datetime @hcb_code.increase_check.approved_at %>
      </p>
    <% else %>
      <p>
        <strong>Requested at</strong>
        <%= format_datetime @hcb_code.increase_check.created_at %>
      </p>
    <% end %>
  </section>

  <section class="details pt2 pb2">
    <p>
      <strong>Sent to</strong>
      <%= @hcb_code.increase_check.recipient_name %>
    </p>

    <p>
      <strong>Addressed to</strong>
      <%= @hcb_code.increase_check.address %>
    </p>

    <p>
      <strong>Check Memo</strong>
      <%= @hcb_code.increase_check.memo %>
    </p>

    <p>
      <strong>Transaction memo</strong>
      <%= render "hcb_codes/memo", hcb_code: @hcb_code %>
    </p>

    <p>
      <strong>Payment purpose</strong>
      <%= @hcb_code.increase_check.payment_for %>
    </p>

    <% if @hcb_code.increase_check.check_number.present? %>
      <p>
        <strong>Check number</strong>
        <span class="mono"><%= @hcb_code.increase_check.check_number %></span>
      </p>
    <% end %>

    <% if @hcb_code.increase_check.increase_status.present? %>
      <% admin_tools "", "p" do %>
        <strong>Status</strong>
        <%= @hcb_code.increase_check.increase_status.humanize %>
      <% end %>
    <% end %>

    <%= render "hcb_codes/tags", hcb_code: @hcb_code, event: (@event || @hcb_code.event) %>
  </section>
</article>
